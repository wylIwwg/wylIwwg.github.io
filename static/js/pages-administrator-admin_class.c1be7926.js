(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-administrator-admin_class"],{"284c":function(t,i,n){"use strict";n.r(i);var e=n("c1a2"),a=n("b9e1");for(var s in a)"default"!==s&&function(t){n.d(i,t,function(){return a[t]})}(s);var u,o=n("f0c5"),d=Object(o["a"])(a["default"],e["b"],e["c"],!1,null,"20f55c26",null,!1,e["a"],u);i["default"]=d.exports},b9e1:function(t,i,n){"use strict";n.r(i);var e=n("d094"),a=n.n(e);for(var s in e)"default"!==s&&function(t){n.d(i,t,function(){return e[t]})}(s);i["default"]=a.a},c1a2:function(t,i,n){"use strict";var e={"t-table":n("2158").default},a=function(){var t=this,i=t.$createElement,n=t._self._c||i;return n("v-uni-view",{staticClass:"warp",staticStyle:{"margin-top":"50rpx"}},[n("v-uni-view",{attrs:{align:"center"}},[t._v("管理班级信息")]),n("v-uni-form",{attrs:{action:""}},[n("v-uni-view",{staticClass:"uni-title  uni-common-pl"},[t._v("班级")]),n("v-uni-view",{staticClass:"uni-form-item dashed-bottom"},[n("v-uni-input",{staticClass:"uni-input",attrs:{id:"name",type:"text",name:"name",placeholder:"请输入班级"},model:{value:t.name,callback:function(i){t.name=i},expression:"name"}})],1),n("v-uni-view",{staticClass:"uni-title  uni-common-pl"},[t._v("班级总人数")]),n("v-uni-view",{staticClass:"uni-form-item dashed-bottom"},[n("v-uni-input",{staticClass:"uni-input",attrs:{id:"student_sum",type:"number",name:"student_sum",placeholder:"请输入班级总人数"},model:{value:t.student_sum,callback:function(i){t.student_sum=i},expression:"student_sum"}})],1),n("v-uni-button",{staticClass:" margin-top margin-lr",attrs:{"form-type":"submit",type:"primary",size:"mini"},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.submit.apply(void 0,arguments)}}},[t._v(t._s(t.isedit?"修改":"添加"))]),n("v-uni-button",{staticClass:"button margin-top margin-lr",attrs:{type:"primary",size:"mini"},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.cancel.apply(void 0,arguments)}}},[t._v("取消")])],1),n("v-uni-view",{staticClass:"box",staticStyle:{"margin-top":"50rpx"}},[n("t-table",{attrs:{border:"3","border-color":"#e6e5e5"}},[n("t-tr",{attrs:{"font-size":"16",color:"#101411",align:"center"}},[n("t-th",{attrs:{align:"left"}},[t._v("序号")]),n("t-th",{attrs:{align:"left"}},[t._v("班级")]),n("t-th",{attrs:{align:"left"}},[t._v("总人数")]),n("t-th",{attrs:{align:"left"}},[t._v("操作")])],1),t._l(t.tableList,function(i,e){return n("t-tr",{key:i.id,attrs:{"font-size":"14",color:"#494743",align:"right"}},[n("t-td",{attrs:{align:"left"}},[t._v(t._s(i.order))]),n("t-td",{attrs:{align:"left"}},[t._v(t._s(i.name))]),n("t-td",{attrs:{align:"left"}},[t._v(t._s(i.student_sum))]),n("t-td",{attrs:{align:"left"}},[n("v-uni-button",{staticStyle:{padding:"10rpx"},attrs:{size:"mini",type:"primary"},on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.edit(i)}}},[t._v("修改")]),n("v-uni-button",{staticStyle:{padding:"10rpx"},attrs:{size:"mini",type:"warn"},on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.del(i)}}},[t._v("删除")])],1)],1)})],2)],1)],1)},s=[];n.d(i,"b",function(){return a}),n.d(i,"c",function(){return s}),n.d(i,"a",function(){return e})},d094:function(t,i,n){"use strict";(function(t){var e=n("288e");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0,n("20d6");var a=e(n("2158")),s=e(n("d47a")),u=e(n("1377")),o=e(n("7250")),d={components:{tTable:a.default,tTh:s.default,tTr:u.default,tTd:o.default},data:function(){return{tableList:[{_id:"",grade_id:0,name:"胜利1班",student_sum:20,order:0},{_id:"",grade_id:1,name:"胜利2班",student_sum:30,order:1},{_id:"",grade_id:2,name:"胜利3班",student_sum:40,order:2}],grade_id:"",name:"",student_sum:"",order:"",isedit:!1,list_item:{}}},onLoad:function(t){this.grade_id=t.grade_id,this.init()},methods:{init:function(){var i=this;uni.showLoading({title:"查询中，请稍等！"}),this.tableList=[],t.callFunction({name:"getClass",data:{grade_id:this.grade_id}}).then(function(t){uni.hideLoading(),console.log(t),i.tableList=t.result}).catch(function(t){uni.hideLoading(),console.error(t)})},submit:function(){var i=this;if(""==this.name)return uni.showToast({icon:"none",title:"班级名称不允许为空！"}),!1;if(0==this.student_sum)return uni.showToast({icon:"none",title:"班级总人数不允许为0！"}),!1;if(uni.showLoading({title:"提交中.."}),1==this.isedit){var n={id:this.list_item._id,data:{}};delete this.list_item._id,this.list_item.name=this.name,this.list_item.student_sum=this.student_sum,n.data=this.list_item,uni.showModal({title:"提示",content:"是否提交对该班级的修改？",success:function(e){e.confirm&&t.callFunction({name:"upClassItem",data:n}).then(function(t){uni.hideLoading(),i.init()}).catch(function(t){uni.hideLoading(),console.error(t)})}})}else{var e={name:this.name,student_sum:this.student_sum,order:this.tableList.length+1,grade_id:this.grade_id};uni.showModal({title:"提示",content:"是否添加该班级？",success:function(n){n.confirm&&t.callFunction({name:"addClassItem",data:e}).then(function(t){uni.hideLoading(),i.init()}).catch(function(t){uni.hideLoading(),console.error(t)})}})}this.isedit=!1,this.name="",this.student_sum=""},cancel:function(){this.isedit=!1,this.name="",this.student_sum=""},edit:function(t){this.name=t.name,this.student_sum=t.student_sum,this.isedit=!0,this.list_item=t},del:function(i){var n=this;uni.showModal({title:"警告",content:"此操作会将该班级下所有学生及已有的健康报备数据全部删除！！！",success:function(e){if(e.confirm){var a=n.tableList.findIndex(function(t){return t.name==i.name});n.tableList.splice(a,1),t.callFunction({name:"delClassItem",data:{_id:i._id}}).then(function(t){console.log(t),n.init()}).catch(function(t){uni.hideLoading(),console.error(t)})}}})}}};i.default=d}).call(this,n("a9ff")["default"])}}]);